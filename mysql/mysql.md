# MySQL

## 事务

### 概念

一个或一组sql语句组成一个执行单元, 这个执行单元要么全部执行, 要么全部不执行

### 事务的ACID特性

1. **原子性(Atomicity)**

   原子性是指事务是一个不可分割的工作单位, 食物中的操作要么都发生, 要么都不发生

2. **一致性(Consistency)**

   事务必须是数据库从一个一致性状态变换到另外一个一致性状态

3. **隔离性(Isolation)**

   一个事务的执行不能被其他事务干扰, 即一个事物内部的操作及使用的数据对并发的其他事务是隔离的, 并发执行的各个事物之间不能互相干扰

4. **持久性(Durability)**

   持久性是指一个事物一旦被提交, 他对数据库中数据的改变就是永久性的, 接下来的其他操作和数据库故障不应该对其有任何影响

### 事务的创建

1. **隐式事务**: 事务没有明显的开启和结束的标记, 如insert, update, delete语句

2. **显式事务**: 事务具有明显的开启和结束的标记

   **前提**: 必须先设置自动提交功能为禁用, ``set autocommit=0``只针对当前事务

### 事务的并发问题

1. **脏读**: 读后回滚
2. **不可重复读**: 读后更新
3. **幻读**: 读后插入

### MySQL的隔离级别

1. **read uncommitted(读未提交)**: 三种并发问题都会出现
2. **read committeed(读已提交)**: 会出现不可重复读和幻读问题, **是oracle默认隔离级别**
3. **repeatable read(可重复读)**: 会出现幻读问题, **是mysql默认隔离级别**
4. **serializable(串行化)**: 三种问题都不会出现

## 视图

### 含义

虚拟表, 和普通表一样使用, 是动态生成的, 只保存sql逻辑, 不保存查询结果

### 作用

1. 重用sql语句
2. 简化复杂的sql操作, 不必知道它的查询细节
3. 保护数据, 提高安全性



